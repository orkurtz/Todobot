# ğŸ¤– WhatsApp Todo Bot

<div align="center">
  <img src="assets/images/todo.png" alt="WhatsApp Todo Bot" width="400">
  
  <p><strong>An intelligent AI-powered personal assistant that helps you manage tasks and stay organized through WhatsApp.</strong></p>
  
  <p>The bot understands natural Hebrew language, extracts actionable tasks, and provides smart reminders for Israeli users.</p>

  <p>
    <a href="#-try-it-now---live-demo"><strong>ğŸš€ Try Now</strong></a> â€¢
    <a href="#-demo"><strong>Demo</strong></a> â€¢
    <a href="#-quick-start"><strong>Get Started</strong></a> â€¢
    <a href="#-features"><strong>Features</strong></a> â€¢
    <a href="#-usage"><strong>Usage</strong></a> â€¢
    <a href="#-deployment"><strong>Deploy</strong></a>
  </p>

  <p>
    <img src="https://img.shields.io/badge/Python-3.8+-blue?style=for-the-badge&logo=python" alt="Python">
    <img src="https://img.shields.io/badge/Flask-Framework-green?style=for-the-badge&logo=flask" alt="Flask">
    <img src="https://img.shields.io/badge/WhatsApp-Business%20API-25D366?style=for-the-badge&logo=whatsapp" alt="WhatsApp">
    <img src="https://img.shields.io/badge/AI-Google%20Gemini-4285F4?style=for-the-badge&logo=google" alt="Google Gemini">
  </p>
  
  <p>
    <a href="https://wa.me/972559664336" target="_blank">
      <img src="https://img.shields.io/badge/ğŸš€_TRY_LIVE_DEMO-FF6B6B?style=for-the-badge&logoColor=white&logo=whatsapp" alt="Try Live Demo">
    </a>
  </p>
</div>

---

## ğŸ“± Demo

<div align="center">
  <h3>See WhatsApp Todo Bot in Action</h3>
  
  <table>
    <tr>
      <td align="center">
        <strong>ğŸ“ Natural Language Input</strong><br>
        <em>"Call mom tomorrow at 3pm"</em><br>
        <em>"Buy groceries today"</em><br>
        <em>"Meeting with John next Monday"</em>
      </td>
      <td align="center">
        <strong>ğŸ¤– AI Processing</strong><br>
        âœ… Task extracted<br>
        ğŸ“… Due date parsed<br>
        ğŸ”” Reminder scheduled
      </td>
      <td align="center">
        <strong>ğŸ“² WhatsApp Response</strong><br>
        <em>"Created 1 task: Call mom (Due: tomorrow 15:00)"</em><br>
        <em>"Task added to your list!"</em><br>
        <em>"Reminder set for 2:45 PM"</em>
      </td>
    </tr>
  </table>

  <p><strong>ğŸ‡®ğŸ‡± Hebrew Language Support:</strong> Optimized for Hebrew speakers and Israeli timezone!</p>
  
  <p>
    <a href="https://wa.me/972559664336" target="_blank">
      <img src="https://img.shields.io/badge/ğŸ’¬_Try_Live_Demo-25D366?style=for-the-badge&logo=whatsapp&logoColor=white" alt="Try Live Demo">
    </a>
  </p>
  
  <p><em>Click above to test the bot directly on WhatsApp! Just send a message like "×œ×§× ×•×ª ×—×œ×‘ ××—×¨ ×‘×—××©" and see the magic happen! âœ¨</em></p>
</div>

## ğŸš€ Try It Now - Live Demo!

<div align="center">
  <h3>ğŸ¯ Ready to experience the magic? Test our live WhatsApp Todo Bot!</h3>
  
  <p>
    <a href="https://wa.me/972559664336?text=×©×œ×•×%20×‘×•×˜%20×”××©×™××•×ª!%20×× ×™%20×¨×•×¦×”%20×œ× ×¡×•×ª%20××•×ª×š." target="_blank">
      <img src="https://img.shields.io/badge/ğŸ’¬%20Start%20Chat%20Now-25D366?style=for-the-badge&logo=whatsapp&logoColor=white&labelColor=25D366" alt="Start WhatsApp Chat" height="60">
    </a>
  </p>
  
  <h4>ğŸ“ Try These Example Messages in Hebrew:</h4>
  <table>
    <tr>
      <td><strong>ğŸ“ Task Examples</strong></td>
      <td><strong>ğŸ“… With Due Dates</strong></td>
      <td><strong>ğŸ”§ Commands</strong></td>
    </tr>
    <tr>
      <td>
        â€¢ "×œ×§× ×•×ª ×—×œ×‘"<br>
        â€¢ "×œ×”×ª×§×©×¨ ×œ×××"<br>
        â€¢ "×œ×¡×™×™× ×¤×¨×•×™×§×˜"<br>
        â€¢ "×¤×’×™×©×” ×¢× ×× ×”×œ"
      </td>
      <td>
        â€¢ "×œ×§× ×•×ª ×—×œ×‘ ×”×™×•×"<br>
        â€¢ "×¤×’×™×©×” ×¢× ×”×¨×•×¤× ××—×¨ ×‘-15:00"<br>
        â€¢ "×œ×”×ª×§×©×¨ ×œ×‘× ×§ ×‘×™×•× ×¨××©×•×Ÿ"<br>
        â€¢ "×œ×¡×™×™× ×“×•×— ×¢×“ ×™×•× ×—××™×©×™"
      </td>
      <td>
        â€¢ "×”××©×™××•×ª ×©×œ×™"<br>
        â€¢ "×¢×–×¨×”"<br>
        â€¢ "×¡×˜×˜×™×¡×˜×™×§×”"<br>
        â€¢ "××©×™××•×ª ×”×•×©×œ××•"
      </td>
    </tr>
  </table>
  
  <p><strong>âš¡ What happens next?</strong><br>
  The bot will instantly parse your Hebrew message, extract tasks, understand due dates, and create reminders - all through natural conversation!</p>
  
  <p><em>ğŸ’¡ Tip: The bot is optimized for Hebrew speakers and follows the Israeli timezone (Asia/Jerusalem)!</em></p>
</div>

---

## âœ¨ Features

### ğŸ¯ Smart Task Management
- **Natural Language Processing**: Just tell the bot what you need to do
- **Automatic Task Extraction**: AI identifies actionable items from your messages
- **Hebrew Date Recognition**: ××‘×™×Ÿ ×ª××¨×™×›×™× ×›××• "××—×¨ ×‘-15:00", "×™×•× ×¨××©×•×Ÿ", "×”×™×•× ×‘×¢×¨×‘"
- **Task Status Tracking**: Pending, completed, and progress tracking

### ğŸ‡®ğŸ‡± Hebrew Language Optimization
- **Natural Hebrew**: ××‘×™×Ÿ ×¢×‘×¨×™×ª ×‘×¦×•×¨×” ×˜×‘×¢×™×ª ×•××“×•×™×§×ª
- **Israeli Context**: ××•×ª×× ×œ×–××Ÿ ×™×©×¨××œ×™ ×•×ª×¨×‘×•×ª ××§×•××™×ª
- **Hebrew Date Parsing**: ××‘×™×Ÿ ×ª××¨×™×›×™× ×‘×¢×‘×¨×™×ª ×›××• "×”×™×•×", "××—×¨", "×™×•× ×¨××©×•×Ÿ"
- **Local Timezone**: ×¢×•×‘×“ ×œ×¤×™ ×©×¢×•×Ÿ ×™×©×¨××œ (Asia/Jerusalem)

### ğŸ”’ Privacy & Security
- **End-to-End Encryption**: All user data is encrypted at rest
- **No Data Mining**: Your conversations are private and secure
- **GDPR Compliant**: Built with privacy regulations in mind

### ğŸ“Š Productivity Insights
- **Statistics Dashboard**: Track your productivity over time
- **Completion Rates**: See how well you're doing with your goals
- **Usage Analytics**: Understand your task management patterns

### âš¡ Smart Features
- **Voice Message Support**: Send voice notes (Hebrew/English)
- **Reminder System**: Get notified when tasks are due
- **Quick Commands**: Fast access with simple commands
- **Rate Limiting**: Built-in protection against spam

## ğŸš€ Quick Start

### Prerequisites
- Python 3.8+
- PostgreSQL database
- Redis (optional, for caching)
- WhatsApp Business API access
- Google Gemini API key

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/buzagloidan/Todobot.git
   cd Todobot
   ```

2. **Create virtual environment**
   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```

3. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

4. **Set up environment variables**
   ```bash
   cp .env.example .env
   # Edit .env with your configuration (including hidden files like .env)
   ```

5. **Initialize database**
   ```bash
   flask db init
   flask db migrate -m "Initial migration"
   flask db upgrade
   ```

6. **Run the application**
   ```bash
   python app.py
   ```

## âš™ï¸ Configuration

### Environment Variables

Create a `.env` file with the following variables:

```env
# Flask Configuration
FLASK_ENV=production
SECRET_KEY=your-secret-key-here

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/whatsapp_todo

# WhatsApp API
WHATSAPP_TOKEN=your-whatsapp-business-api-token
WEBHOOK_VERIFY_TOKEN=your-webhook-verify-token

# Google Gemini AI
GEMINI_API_KEY=your-gemini-api-key

# Redis (Optional)
REDIS_URL=redis://localhost:6379

# Encryption
ENCRYPTION_KEY=your-base64-encryption-key

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=10
RATE_LIMIT_REQUESTS_PER_HOUR=100
RATE_LIMIT_REQUESTS_PER_DAY=500
```

### WhatsApp Business API Setup

1. Create a WhatsApp Business account
2. Set up webhook URL: `https://yourdomain.com/webhook`
3. Configure webhook verification token
4. Add your phone number to the allowed list

## ğŸ“ Project Structure

```
Todobot/
â”œâ”€â”€ src/                    # Source code
â”‚   â”œâ”€â”€ models/            # Database models
â”‚   â”‚   â””â”€â”€ database.py    # SQLAlchemy models
â”‚   â”œâ”€â”€ services/          # Business logic services
â”‚   â”‚   â”œâ”€â”€ ai_service.py      # AI/Gemini integration
â”‚   â”‚   â”œâ”€â”€ whatsapp_service.py # WhatsApp API client
â”‚   â”‚   â”œâ”€â”€ task_service.py     # Task management
â”‚   â”‚   â””â”€â”€ encryption.py      # Data encryption
â”‚   â”œâ”€â”€ utils/             # Utility functions
â”‚   â”‚   â”œâ”€â”€ rate_limiter.py    # Rate limiting
â”‚   â”‚   â”œâ”€â”€ circuit_breaker.py # Circuit breaker pattern
â”‚   â”‚   â””â”€â”€ validation.py      # Input validation
â”‚   â”œâ”€â”€ routes/            # Flask routes
â”‚   â”‚   â”œâ”€â”€ webhook.py     # WhatsApp webhook handler
â”‚   â”‚   â”œâ”€â”€ admin.py       # Admin dashboard
â”‚   â”‚   â””â”€â”€ api.py         # REST API endpoints
â”‚   â”œâ”€â”€ config/            # Configuration
â”‚   â”‚   â””â”€â”€ settings.py    # App configuration
â”‚   â””â”€â”€ app.py            # Flask application factory
â”œâ”€â”€ app.py                # Main application entry point
â”œâ”€â”€ worker.py             # Background worker process
â”œâ”€â”€ requirements.txt      # Python dependencies
â”œâ”€â”€ setup.py             # Package setup
â”œâ”€â”€ Procfile             # Railway/Heroku deployment
â”œâ”€â”€ .env                 # Environment variables (hidden file)
â”œâ”€â”€ .env.example         # Environment template (hidden file)
â””â”€â”€ README.md            # This file
```

## ğŸ”§ Usage

### Basic Commands

Send these messages to the bot:

- `×¢×–×¨×”` or `help` - Get help and available commands
- `××©×™××•×ª` or `×”××©×™××•×ª ×©×œ×™` - View your pending tasks
- `×¡×˜×˜×™×¡×˜×™×§×”` or `stats` - See your productivity statistics
- `×”×•×©×œ××•` or `completed` - View recently completed tasks

### Natural Language Examples

#### Hebrew Examples
- "×œ×”×ª×§×©×¨ ×œ××× ××—×¨ ×‘-15:00"
- "×œ×§× ×•×ª ××¦×¨×›×™× ×”×™×•×"
- "×¤×’×™×©×” ×¢× ×™×•×—× ×Ÿ ×‘×™×•× ×¨××©×•×Ÿ ×‘-10:00"
- "×œ×¡×™×™× ××ª ×”×“×•×— ×¢×“ ×™×•× ×©×™×©×™"
- "×œ×–×›×•×¨ ×œ×©×œ× ×—×©××œ ×¢×“ ×™×•× ×¨×‘×™×¢×™"
- "×œ×”×–××™×Ÿ ××¡×¢×“×” ×œ×©×‘×ª ×‘-19:30"

### Task Management

- React with ğŸ‘ to any message to mark related tasks as completed
- Tasks with due dates will send reminders
- Overdue tasks will be highlighted with âš ï¸
- Tasks due today will show ğŸ”¥

## ğŸš€ Deployment

### Railway (Recommended)

1. Connect your GitHub repository to Railway
2. Set environment variables in Railway dashboard
3. Deploy automatically with git push

### Docker

```bash
# Build image
docker build -t whatsapp-todo-bot .

# Run container
docker run -d --name todo-bot -p 5000:5000 --env-file .env whatsapp-todo-bot
```

## ğŸ”§ Development

### Running Tests

```bash
# Install development dependencies
pip install -r requirements-dev.txt

# Run tests
python -m pytest tests/

# Run with coverage
python -m pytest tests/ --cov=src/
```

### Code Quality

```bash
# Format code
black src/ tests/

# Lint code
flake8 src/ tests/

# Type checking
mypy src/
```

### Database Migrations

```bash
# Create migration
flask db migrate -m "Description of changes"

# Apply migration
flask db upgrade

# Rollback migration
flask db downgrade
```

## ğŸ“Š Monitoring

### Health Checks

- **Application Health**: `GET /admin/health`
- **API Health**: `GET /api/health`
- **Metrics**: `GET /api/metrics` (Prometheus format)

### Admin Dashboard

Access the admin dashboard at `/admin/dashboard` to monitor:

- User statistics
- Message volume
- Task completion rates
- System health status

## ğŸ” Security

### Data Protection

- All user data is encrypted using AES-256
- Phone numbers are hashed for lookups
- Messages are encrypted at rest
- No conversation data is logged

### Rate Limiting

- Per-user message limits
- API rate limiting
- Circuit breaker protection
- Input validation and sanitization

### Best Practices

- Use HTTPS in production
- Regularly rotate encryption keys
- Monitor for suspicious activity
- Keep dependencies updated

## ğŸ› Troubleshooting

### Common Issues

1. **Database Connection Issues**
   ```bash
   # Check database connection
   python -c "from src.models.database import db; print('Connected')"
   ```

2. **WhatsApp API Issues**
   - Verify webhook URL is accessible
   - Check token permissions
   - Ensure phone number is verified

3. **AI Service Issues**
   - Verify Gemini API key is valid
   - Check API quota limits
   - Monitor rate limiting

### Logs

Application logs include:
- Request/response details
- Error messages with context
- Performance metrics
- Security events

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ™ Acknowledgments

- [Google Gemini](https://ai.google.dev/) for AI capabilities
- [WhatsApp Business API](https://developers.facebook.com/docs/whatsapp) for messaging
- [Flask](https://flask.palletsprojects.com/) for the web framework
- [SQLAlchemy](https://www.sqlalchemy.org/) for database management

---

<div align="center">
  <p>Made with â¤ï¸ for Israeli productivity enthusiasts</p>
  
  <p>
    <a href="https://wa.me/972559664336?text=×©×œ×•×!%20××¦××ª×™%20××ª%20×”×‘×•×˜%20×©×œ×š%20×‘-GitHub!" target="_blank">
      <img src="https://img.shields.io/badge/ğŸ’¬%20Chat%20with%20Bot-25D366?style=flat&logo=whatsapp" alt="Chat with Bot">
    </a>
    <img src="https://img.shields.io/badge/Made%20with-â¤ï¸-red?style=flat" alt="Made with Love">
    <img src="https://img.shields.io/badge/Open%20Source-âœ¨-blue?style=flat" alt="Open Source">
  </p>
</div>