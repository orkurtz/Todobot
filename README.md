# 🤖 WhatsApp Todo Bot


<div align="center">
  <img src="assets/images/todo.png" alt="WhatsApp Todo Bot" width="400">
  
  <p><strong>An intelligent AI-powered personal assistant that helps you manage tasks and stay organized through WhatsApp.</strong></p>
  
  <p>The bot understands natural Hebrew language, extracts actionable tasks, and provides smart reminders for Israeli users.</p>

  <p>
    <a href="#-try-it-now---live-demo"><strong>🚀 Try Now</strong></a> •
    <a href="#-demo"><strong>Demo</strong></a> •
    <a href="#-quick-start"><strong>Get Started</strong></a> •
    <a href="#-features"><strong>Features</strong></a> •
    <a href="#-usage"><strong>Usage</strong></a> •
    <a href="#-deployment"><strong>Deploy</strong></a>
  </p>

  <p>
    <img src="https://img.shields.io/badge/Python-3.8+-blue?style=for-the-badge&logo=python" alt="Python">
    <img src="https://img.shields.io/badge/Flask-Framework-green?style=for-the-badge&logo=flask" alt="Flask">
    <img src="https://img.shields.io/badge/WhatsApp-Business%20API-25D366?style=for-the-badge&logo=whatsapp" alt="WhatsApp">
    <img src="https://img.shields.io/badge/AI-Google%20Gemini-4285F4?style=for-the-badge&logo=google" alt="Google Gemini">
  </p>
  
  <p>
    <a href="https://wa.me/972559664336" target="_blank">
      <img src="https://img.shields.io/badge/🚀_TRY_LIVE_DEMO-FF6B6B?style=for-the-badge&logoColor=white&logo=whatsapp" alt="Try Live Demo">
    </a>
  </p>
</div>

---

## 📱 Demo

<div align="center">
  <h3>See WhatsApp Todo Bot in Action</h3>
  
  <table>
    <tr>
      <td align="center">
        <strong>📝 Natural Language Input</strong><br>
        <em>"Call mom tomorrow at 3pm"</em><br>
        <em>"Buy groceries today"</em><br>
        <em>"Meeting with John next Monday"</em>
      </td>
      <td align="center">
        <strong>🤖 AI Processing</strong><br>
        ✅ Task extracted<br>
        📅 Due date parsed<br>
        🔔 Reminder scheduled
      </td>
      <td align="center">
        <strong>📲 WhatsApp Response</strong><br>
        <em>"Created 1 task: Call mom (Due: tomorrow 15:00)"</em><br>
        <em>"Task added to your list!"</em><br>
        <em>"Reminder set for 2:45 PM"</em>
      </td>
    </tr>
  </table>

  <p><strong>🇮🇱 Hebrew Language Support:</strong> Optimized for Hebrew speakers and Israeli timezone!</p>
  
  <p>
    <a href="https://wa.me/972559664336" target="_blank">
      <img src="https://img.shields.io/badge/💬_Try_Live_Demo-25D366?style=for-the-badge&logo=whatsapp&logoColor=white" alt="Try Live Demo">
    </a>
  </p>
  
  <p><em>Click above to test the bot directly on WhatsApp! Just send a message like "לקנות חלב מחר בחמש" and see the magic happen! ✨</em></p>
</div>

## 🚀 Try It Now - Live Demo!

<div align="center">
  <h3>🎯 Ready to experience the magic? Test our live WhatsApp Todo Bot!</h3>
  
  <p>
    <a href="https://wa.me/972559664336?text=שלום%20בוט%20המשימות!%20אני%20רוצה%20לנסות%20אותך." target="_blank">
      <img src="https://img.shields.io/badge/💬%20Start%20Chat%20Now-25D366?style=for-the-badge&logo=whatsapp&logoColor=white&labelColor=25D366" alt="Start WhatsApp Chat" height="60">
    </a>
  </p>
  
  <h4>📝 Try These Example Messages in Hebrew:</h4>
  <table>
    <tr>
      <td><strong>📝 Task Examples</strong></td>
      <td><strong>📅 With Due Dates</strong></td>
      <td><strong>🔧 Commands</strong></td>
    </tr>
    <tr>
      <td>
        • "לקנות חלב"<br>
        • "להתקשר לאמא"<br>
        • "לסיים פרויקט"<br>
        • "פגישה עם מנהל"
      </td>
      <td>
        • "לקנות חלב היום"<br>
        • "פגישה עם הרופא מחר ב-15:00"<br>
        • "להתקשר לבנק ביום ראשון"<br>
        • "לסיים דוח עד יום חמישי"
      </td>
      <td>
        • "המשימות שלי"<br>
        • "עזרה"<br>
        • "סטטיסטיקה"<br>
        • "משימות הושלמו"
      </td>
    </tr>
  </table>
  
  <p><strong>⚡ What happens next?</strong><br>
  The bot will instantly parse your Hebrew message, extract tasks, understand due dates, and create reminders - all through natural conversation!</p>
  
  <p><em>💡 Tip: The bot is optimized for Hebrew speakers and follows the Israeli timezone (Asia/Jerusalem)!</em></p>
</div>

---

## ✨ Features

### 🎯 Smart Task Management
- **Natural Language Processing**: Just tell the bot what you need to do
- **Automatic Task Extraction**: AI identifies actionable items from your messages
- **Hebrew Date Recognition**: מבין תאריכים כמו "מחר ב-15:00", "יום ראשון", "היום בערב"
- **Task Status Tracking**: Pending, completed, and progress tracking

### 🇮🇱 Hebrew Language Optimization
- **Natural Hebrew**: מבין עברית בצורה טבעית ומדויקת
- **Israeli Context**: מותאם לזמן ישראלי ותרבות מקומית
- **Hebrew Date Parsing**: מבין תאריכים בעברית כמו "היום", "מחר", "יום ראשון"
- **Local Timezone**: עובד לפי שעון ישראל (Asia/Jerusalem)

### 🔒 Privacy & Security
- **End-to-End Encryption**: All user data is encrypted at rest
- **No Data Mining**: Your conversations are private and secure
- **GDPR Compliant**: Built with privacy regulations in mind

### 📊 Productivity Insights
- **Statistics Dashboard**: Track your productivity over time
- **Completion Rates**: See how well you're doing with your goals
- **Usage Analytics**: Understand your task management patterns

### ⚡ Smart Features
- **Voice Message Support**: Send voice notes (Hebrew/English)
- **Reminder System**: Get notified when tasks are due
- **Quick Commands**: Fast access with simple commands
- **Rate Limiting**: Built-in protection against spam

## 🚀 Quick Start

### Prerequisites
- Python 3.8+
- PostgreSQL database
- Redis (optional, for caching)
- WhatsApp Business API access
- Google Gemini API key

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/buzagloidan/Todobot.git
   cd Todobot
   ```

2. **Create virtual environment**
   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```

3. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

4. **Set up environment variables**
   ```bash
   cp .env.example .env
   # Edit .env with your configuration (including hidden files like .env)
   ```

5. **Initialize database**
   ```bash
   flask db init
   flask db migrate -m "Initial migration"
   flask db upgrade
   ```

6. **Run the application**
   ```bash
   python app.py
   ```

## ⚙️ Configuration

### Environment Variables

Create a `.env` file with the following variables:

```env
# Flask Configuration
FLASK_ENV=production
SECRET_KEY=your-secret-key-here

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/whatsapp_todo

# WhatsApp API
WHATSAPP_TOKEN=your-whatsapp-business-api-token
WEBHOOK_VERIFY_TOKEN=your-webhook-verify-token

# Google Gemini AI
GEMINI_API_KEY=your-gemini-api-key

# Redis (Optional)
REDIS_URL=redis://localhost:6379

# Encryption
ENCRYPTION_KEY=your-base64-encryption-key

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=10
RATE_LIMIT_REQUESTS_PER_HOUR=100
RATE_LIMIT_REQUESTS_PER_DAY=500
```

### WhatsApp Business API Setup

1. Create a WhatsApp Business account
2. Set up webhook URL: `https://yourdomain.com/webhook`
3. Configure webhook verification token
4. Add your phone number to the allowed list

## 📁 Project Structure

```
Todobot/
├── src/                    # Source code
│   ├── models/            # Database models
│   │   └── database.py    # SQLAlchemy models
│   ├── services/          # Business logic services
│   │   ├── ai_service.py      # AI/Gemini integration
│   │   ├── whatsapp_service.py # WhatsApp API client
│   │   ├── task_service.py     # Task management
│   │   └── encryption.py      # Data encryption
│   ├── utils/             # Utility functions
│   │   ├── rate_limiter.py    # Rate limiting
│   │   ├── circuit_breaker.py # Circuit breaker pattern
│   │   └── validation.py      # Input validation
│   ├── routes/            # Flask routes
│   │   ├── webhook.py     # WhatsApp webhook handler
│   │   ├── admin.py       # Admin dashboard
│   │   └── api.py         # REST API endpoints
│   ├── config/            # Configuration
│   │   └── settings.py    # App configuration
│   └── app.py            # Flask application factory
├── app.py                # Main application entry point
├── worker.py             # Background worker process
├── requirements.txt      # Python dependencies
├── setup.py             # Package setup
├── Procfile             # Railway/Heroku deployment
├── .env                 # Environment variables (hidden file)
├── .env.example         # Environment template (hidden file)
└── README.md            # This file
```

## 🔧 Usage

### Basic Commands

Send these messages to the bot:

- `עזרה` or `help` - Get help and available commands
- `משימות` or `המשימות שלי` - View your pending tasks
- `סטטיסטיקה` or `stats` - See your productivity statistics
- `הושלמו` or `completed` - View recently completed tasks

### Natural Language Examples

#### Hebrew Examples
- "להתקשר לאמא מחר ב-15:00"
- "לקנות מצרכים היום"
- "פגישה עם יוחנן ביום ראשון ב-10:00"
- "לסיים את הדוח עד יום שישי"
- "לזכור לשלם חשמל עד יום רביעי"
- "להזמין מסעדה לשבת ב-19:30"

### Task Management

- React with 👍 to any message to mark related tasks as completed
- Tasks with due dates will send reminders
- Overdue tasks will be highlighted with ⚠️
- Tasks due today will show 🔥

## 🚀 Deployment

### Railway (Recommended)

1. Connect your GitHub repository to Railway
2. Set environment variables in Railway dashboard
3. Deploy automatically with git push

### Docker

```bash
# Build image
docker build -t whatsapp-todo-bot .

# Run container
docker run -d --name todo-bot -p 5000:5000 --env-file .env whatsapp-todo-bot
```

## 🔧 Development

### Running Tests

```bash
# Install development dependencies
pip install -r requirements-dev.txt

# Run tests
python -m pytest tests/

# Run with coverage
python -m pytest tests/ --cov=src/
```

### Code Quality

```bash
# Format code
black src/ tests/

# Lint code
flake8 src/ tests/

# Type checking
mypy src/
```

### Database Migrations

```bash
# Create migration
flask db migrate -m "Description of changes"

# Apply migration
flask db upgrade

# Rollback migration
flask db downgrade
```

## 📊 Monitoring

### Health Checks

- **Application Health**: `GET /admin/health`
- **API Health**: `GET /api/health`
- **Metrics**: `GET /api/metrics` (Prometheus format)

### Admin Dashboard

Access the admin dashboard at `/admin/dashboard` to monitor:

- User statistics
- Message volume
- Task completion rates
- System health status

## 🔐 Security

### Data Protection

- All user data is encrypted using AES-256
- Phone numbers are hashed for lookups
- Messages are encrypted at rest
- No conversation data is logged

### Rate Limiting

- Per-user message limits
- API rate limiting
- Circuit breaker protection
- Input validation and sanitization

### Best Practices

- Use HTTPS in production
- Regularly rotate encryption keys
- Monitor for suspicious activity
- Keep dependencies updated

## 🐛 Troubleshooting

### Common Issues

1. **Database Connection Issues**
   ```bash
   # Check database connection
   python -c "from src.models.database import db; print('Connected')"
   ```

2. **WhatsApp API Issues**
   - Verify webhook URL is accessible
   - Check token permissions
   - Ensure phone number is verified

3. **AI Service Issues**
   - Verify Gemini API key is valid
   - Check API quota limits
   - Monitor rate limiting

### Logs

Application logs include:
- Request/response details
- Error messages with context
- Performance metrics
- Security events

## 📄 License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## 🙏 Acknowledgments

- [Google Gemini](https://ai.google.dev/) for AI capabilities
- [WhatsApp Business API](https://developers.facebook.com/docs/whatsapp) for messaging
- [Flask](https://flask.palletsprojects.com/) for the web framework
- [SQLAlchemy](https://www.sqlalchemy.org/) for database management

---

<div align="center">
  <p>Made with ❤️ for Israeli productivity enthusiasts</p>
  
  <p>
    <a href="https://wa.me/972559664336?text=שלום!%20מצאתי%20את%20הבוט%20שלך%20ב-GitHub!" target="_blank">
      <img src="https://img.shields.io/badge/💬%20Chat%20with%20Bot-25D366?style=flat&logo=whatsapp" alt="Chat with Bot">
    </a>
    <img src="https://img.shields.io/badge/Made%20with-❤️-red?style=flat" alt="Made with Love">
    <img src="https://img.shields.io/badge/Open%20Source-✨-blue?style=flat" alt="Open Source">
  </p>
</div>
